<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Server Report</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"
    />
    <style>
      body {
        font-family: Arial, sans-serif;
        background-color: #f8f9fa;
        padding: 20px;
      }
      .container {
        background-color: #fff;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      }
      .info {
        margin-bottom: 20px;
      }
      .users,
      .additional-info {
        margin-bottom: 20px;
      }
      .footer {
        text-align: center;
        color: #777;
        margin-top: 20px;
      }
      .icon {
        margin-right: 8px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1 class="text-center">Server Report <i class="fas fa-server"></i></h1>

      <div class="info">
        <p><strong>Server Name:</strong> {{ ansible_hostname }}</p>
        <p><strong>Server IPV4:</strong> {{ ansible_default_ipv4.address }}</p>
        <p><strong>Server IPV6:</strong> {{ ansible_default_ipv6.address }}</p>
        <p><strong>Environment:</strong> {{ environment_name }}</p>
      </div>

      <div class="users">
        <h2>Users <i class="fas fa-users"></i></h2>
        <table class="table table-striped">
          <thead class="thead-dark">
            <tr>
              <th>Username</th>
              <th>Role</th>
            </tr>
          </thead>
          <tbody>
            {% for user in users %}
            <tr>
              <td>{{ user.name }}</td>
              <td>{{ user.role }}</td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>

      <div class="conditional">
        {% if environment_name == 'production' %}
        <p class="alert alert-danger">
          <i class="fas fa-exclamation-triangle icon"></i>This is a production
          environment. Extra caution is required.
        </p>
        {% else %}
        <p class="alert alert-info">
          <i class="fas fa-info-circle icon"></i>This is a {{ environment_name }}
          environment.
        </p>
        {% endif %}
      </div>

      <div class="filters">
        <p>
          <strong>Uptime:</strong> {{ uptime | int | round(2) }} days
          <i class="fas fa-clock"></i>
        </p>
      </div>

      <div class="additional-info">
        <h2>Additional Information <i class="fas fa-info"></i></h2>
        <table class="table table-bordered">
          <tr>
            <th>CPU Cores</th>
            <td>{{ ansible_processor_cores }}</td>
          </tr>
          <tr>
            <th>Memory</th>
            <td>{{ ansible_memory_mb }} MB</td>
          </tr>
        </table>
      </div>

      <div class="footer">
        <p>Generated by Ansible <i class="fas fa-code"></i></p>
      </div>
    </div>
  </body>
</html>
